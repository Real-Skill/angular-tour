!function(a,b,c){"use strict";angular.module("angular-tour",["angular-tour.tpls","angular-tour.tour"]),angular.module("angular-tour.tpls",["tour/tour.tpl.html"]),angular.module("tour/tour.tpl.html",[]).run(["$templateCache",function(a){a.put("tour/tour.tpl.html",'<div class="tour-tip">\n    <span class="tour-arrow tt-{{ ttPlacement }}" ng-hide="centered"></span>\n    <div class="tour-content-wrapper">\n        <p ng-bind="ttContent"></p>\n        <a ng-click="back()" ng-bind="ttBackLabel" ng-show="getCurrentStep()>0" class="small button tour-next-tip"></a>\n        <a ng-click="proceed()" ng-bind="ttNextLabel" class="small button tour-next-tip"></a>\n        <a ng-click="closeTour()" class="tour-close-tip">&times;</a>\n    </div>\n</div>\n')}]),angular.module("angular-tour.tour",[]).constant("tourConfig",{placement:"top",animation:!0,previousLabel:"Previous",nextLabel:"Next",scrollSpeed:500,offset:28,backDrop:!1,useSourceScope:!1}).controller("TourController",["$scope","orderedList",function(a,b){var c=this,d=c.steps=b();c.postTourCallback=angular.noop,c.postStepCallback=angular.noop,c.showStepCallback=angular.noop,c.currentStep=-1,a.$watch(function(){return c.currentStep},function(a){c.select(a)}),c.select=function(a){if(angular.isNumber(a)){c.unselectAllSteps();var b=d.get(a);b&&(b.ttOpen=!0),c.currentStep!==a&&(c.currentStep=a),c.currentStep>-1&&c.showStepCallback(),a>=d.getCount()&&c.postTourCallback(!0),c.postStepCallback()}},c.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)?d.set(a.index,a):d.push(a)},c.unselectAllSteps=function(){d.forEach(function(a){a.ttOpen=!1})},c.cancelTour=function(){c.unselectAllSteps(),c.postTourCallback(!1)},a.openTour=function(){var a=c.currentStep>=d.getCount()||c.currentStep<0?0:c.currentStep;c.select(a)},a.closeTour=function(){c.cancelTour()},a.finishTour=function(){c.unselectAllSteps(),c.postTourCallback(!0)}}]).directive("tour",["$parse","tourConfig",function(a,b){return{controller:"TourController",restrict:"EA",scope:!0,link:function(c,d,e,f){if(f.previousStep=[],!angular.isDefined(e.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";var g=a(e.step),h=!1;c.$watch(e.step,function(a){f.currentStep=a}),f.postTourCallback=function(a){angular.element(".tour-backdrop").remove(),h=!1,angular.element(".tour-element-active").removeClass("tour-element-active"),a&&angular.isDefined(e.tourComplete)&&c.$parent.$eval(e.tourComplete),angular.isDefined(e.postTour)&&c.$parent.$eval(e.postTour)},f.postStepCallback=function(){angular.isDefined(e.postStep)&&c.$parent.$eval(e.postStep)},f.showStepCallback=function(){!h&&b.backDrop&&(angular.element("body").append(angular.element('<div class="tour-backdrop"></div>')),h=!0)},c.setCurrentStep=function(a,b){g.assign(c.$parent,a),b||f.previousStep.push(f.currentStep),f.currentStep=a},c.back=function(){c.setCurrentStep(c.getPreviousStep(),!0)},c.skipStep=function(){f.currentStep++},c.getPreviousStep=function(){return f.previousStep.pop()},c.getCurrentStep=function(){return f.currentStep}}}}]).directive("tourtip",["$window","$compile","$interpolate","$timeout","scrollTo","tourConfig",function(b,c,d,e,f,g){var h=(d.startSymbol(),d.endSymbol(),"<div tour-popup></div>");return{require:"^tour",restrict:"EA",scope:!0,link:function(d,i,j,k){function l(){var a=d.ttElement?angular.element(d.ttElement):i,b=d;return a===i||d.ttSourceScope||(b=a.scope()),b}function m(b){var c,e=b[0].getBoundingClientRect(),f=e.top+a.pageYOffset,g=q.width(),h=q.height();switch(d.ttPlacement){case"right":c={top:f,left:e.left+e.width+d.ttOffset};break;case"bottom":c={top:f+e.height+d.ttOffset,left:e.left};break;case"center":c={top:f+.5*(e.height-h)+d.ttOffset,left:e.left+.5*(e.width-g)};break;case"center-top":c={top:f+.1*(e.height-h)+d.ttOffset,left:e.left+.5*(e.width-g)};break;case"left":c={top:f,left:e.left-g-d.ttOffset};break;default:c={top:f-h-d.ttOffset,left:e.left}}return c.top+="px",c.left+="px",c}function n(){if(d.ttContent){d.ttAnimation?q.fadeIn():q.css({display:"block"});var a=d.ttElement?angular.element(d.ttElement):i;if(!(null!=a&&0!==a.length||null!=a&&0!==a.length))return d.last&&d.$parent.finishTour(),void d.skipStep();angular.element("body").append(q);var c=function(){var b=m(a);q.css(b),f(q,-200,-300,g.scrollSpeed)};if(g.backDrop&&p(a),angular.element(b).bind("resize."+d.$id,c),c(),d.onStepShow){var h=l();e(function(){h.$eval(d.onStepShow)},300)}}}function o(){q.detach(),angular.element(b).unbind("resize."+d.$id)}function p(a){angular.element(".tour-element-active").removeClass("tour-element-active"),d.centered||a.addClass("tour-element-active")}j.$observe("tourtip",function(a){d.ttContent=a}),j.$observe("tourtipPlacement",function(a){d.ttPlacement=(a||g.placement).toLowerCase().trim(),d.centered=0===d.ttPlacement.indexOf("center")}),j.$observe("tourtipPreviousLabel",function(a){d.ttBackLabel=a||g.previousLabel}),j.$observe("tourtipNextLabel",function(a){d.ttNextLabel=a||g.nextLabel}),j.$observe("tourtipOffset",function(a){d.ttOffset=parseInt(a,10)||g.offset}),j.$observe("onShow",function(a){d.onStepShow=a||null}),j.$observe("onProceed",function(a){d.onStepProceed=a||null}),j.$observe("tourtipElement",function(a){d.ttElement=a||null}),j.$observe("useSourceScope",function(a){d.ttSourceScope=a?"true"===a:g.useSourceScope}),d.ttBackLabel=g.previousLabel,d.ttNextLabel=g.nextLabel,d.ttPlacement=g.placement.toLowerCase().trim(),d.centered=!1,d.ttOffset=g.offset,d.ttSourceScope=g.useSourceScope,d.ttOpen=!1,d.ttAnimation=g.animation,d.index=parseInt(j.tourtipStep,10),d.last=j.hasOwnProperty("tourtipLast");var q=c(h)(d);k.addStep(d),e(function(){d.$watch("ttOpen",function(a){a?n():o()})},500),d.$on("$destroy",function(){angular.element(b).unbind("resize."+d.$id),q.remove(),q=null}),d.proceed=function(){if(d.onStepProceed){var a=l();e(function(){a.$eval(d.onStepProceed)},100)}d.setCurrentStep(d.getCurrentStep()+1)}}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(a,b,c){}}}).factory("orderedList",function(){var a=function(){this.map={},this._array=[]};a.prototype.set=function(a,b){if(angular.isNumber(a))if(a in this.map)this.map[a]=b;else{if(a<this._array.length){var c=a-1>0?a-1:0;this._array.splice(c,0,a)}else this._array.push(a);this.map[a]=b,this._array.sort(function(a,b){return a-b})}},a.prototype.indexOf=function(a){for(var b in this.map)if(this.map.hasOwnProperty(b)&&this.map[b]===a)return Number(b)},a.prototype.push=function(a){var b=this._array[this._array.length-1]+1||0;this._array.push(b),this.map[b]=a,this._array.sort(function(a,b){return a-b})},a.prototype.remove=function(a){var b=this._array.indexOf(a);if(-1===b)throw new Error("key does not exist");this._array.splice(b,1),delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return this._array.length},a.prototype.forEach=function(a){for(var b,c,d=0;d<this._array.length;d++)b=this._array[d],c=this.map[b],a(c,b)},a.prototype.first=function(){var a,b;return a=this._array[0],b=this.map[a]};var b=function(){return new a};return b}).factory("scrollTo",function(){return function(a,b,c,d){a?(b=b||-100,c=c||-100,d=d||500,$("html,body").stop().animate({scrollTop:a.offset().top+b,scrollLeft:a.offset().left+c},d)):$("html,body").stop().animate({scrollTop:0},d)}})}(window,document);